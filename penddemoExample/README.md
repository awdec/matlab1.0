# 一阶倒立摆控制系统

## 项目概述

本项目是基于MATLAB/Simulink平台的一阶倒立摆仿真系统，实现了倒立摆的物理建模、PID控制器设计、实时动画展示和性能分析等功能。

## 系统组成

### 核心文件

- `penddemo.slx` - Simulink主模型文件
- `pendan.m` - 动画显示S-Function
- `penddemoExample.m` - 主运行脚本
- `pendulum1.png` - 系统示意图

### 系统架构

```
物理层（倒立摆动力学模型 + 小车运动模型）
    ↓
控制层（PID控制器 + 状态观测器 + 参考信号生成）
    ↓
展示层（实时动画显示 + 信号监测与分析）
```

## 快速开始

### 环境要求

- MATLAB R2019a或更高版本
- Simulink工具箱
- Control System Toolbox（推荐）

### 运行步骤

1. 启动MATLAB并切换到项目目录：
```matlab
cd('penddemoExample')
```

2. 运行主脚本：
```matlab
penddemoExample
```

3. 系统将自动：
   - 打开Simulink模型
   - 设置仿真时间为10秒
   - 启动仿真
   - 显示动画窗口

### 交互操作

- **滑块控制**：拖动滑块调整参考位置（-9到+9米）
- **播放按钮**：仿真结束后点击可回放动画
- **关闭按钮**：关闭动画窗口

## 系统参数

### 物理参数（在Simulink模型掩码中配置）

| 参数 | 符号 | 默认值 | 单位 | 说明 |
|------|------|--------|------|------|
| 小车质量 | M | 0.5 | kg | 可在掩码中修改 |
| 摆杆质量 | m | 0.2 | kg | 影响系统惯性 |
| 摆杆长度 | L | 0.3 | m | 从铰链到质心 |
| 重力加速度 | g | 9.8 | m/s² | 标准地球重力 |
| 摩擦系数 | b | 0.1 | N·s/m | 小车与导轨间摩擦 |

### 控制参数

控制系统采用双环PID结构：

- **外环（位置控制）**：控制小车位置跟踪参考信号
- **内环（姿态控制）**：快速稳定摆杆角度

参数整定建议参考《参数整定指南.md》

## 系统特性

### 控制目标

- **稳定性**：摆杆角度偏差 < 5°
- **跟踪性**：位置跟踪误差 < 0.1m
- **快速性**：调节时间 < 3秒
- **平稳性**：最大超调量 < 20%

### 动画更新机制

- 刷新率：10Hz（每0.1秒）
- 输入向量：[参考位置, 小车位置, 摆杆角度]
- 小车宽度：±2单位
- 摆杆长度：10单位

## 模型结构

### Simulink模型组成

1. **倒立摆动力学子系统**
   - 输入：控制力F
   - 输出：小车位置x、速度ẋ、摆杆角度θ、角速度θ̇
   - 实现：非线性微分方程的数值求解

2. **PID控制器子系统**
   - 双环控制结构
   - 带积分饱和限制和输出限幅

3. **状态观测器子系统**
   - Luenberger观测器
   - 估计不可直接测量的状态变量

4. **动画模块**
   - Level-2 MATLAB S-Function
   - 实时显示系统状态

5. **信号监测**
   - Scope示波器
   - Simulation Data Inspector数据记录

## 仿真流程

1. 用户运行`penddemoExample.m`
2. 脚本打开Simulink模型`penddemo.slx`
3. 设置仿真参数（停止时间等）
4. 启动仿真
5. 每个仿真步长：
   - 控制器计算控制力
   - 动力学模型更新状态
   - 动画模块更新显示（每0.1秒）
6. 仿真完成，数据保存到工作区

## 性能分析

### 监测信号

通过Scope示波器可观察：

- 小车位置x（±10m范围）
- 摆杆角度θ（±30°范围）
- 控制力F
- 位置误差
- 角度误差

### 性能指标

- 上升时间：从10%到90%稳态值的时间
- 峰值时间：达到第一个峰值的时间
- 超调量：(峰值-稳态值)/稳态值×100%
- 调节时间：进入并保持在±2%误差带的时间
- 稳态误差：最终输出与期望值的偏差

## 扩展功能

### 测试场景

1. **阶跃响应测试**：参考位置阶跃变化
2. **扰动抑制测试**：施加外部扰动力
3. **正弦跟踪测试**：正弦参考信号
4. **初值响应测试**：非零初始角度

### 参数修改

1. 双击Simulink模型中的"Pendulum"子系统
2. 右键选择"Mask Parameters"
3. 修改物理参数
4. 点击"OK"应用更改
5. 重新运行仿真

## 故障排除

| 问题现象 | 可能原因 | 解决方法 |
|----------|----------|----------|
| 动画窗口不出现 | S-Function路径问题 | 检查pendan.m是否在路径中 |
| 摆杆持续振荡 | PID参数不当 | 减小Ki，增大Kd |
| 小车位置漂移 | 积分饱和 | 添加积分抗饱和限制 |
| 仿真运行缓慢 | 步长过小 | 适当增大最大步长 |
| 数值溢出错误 | 初值过大或参数不合理 | 检查初始条件和物理参数 |

## 相关文档

📌 **推荐从这里开始**：[文档导航.md](文档导航.md) - 完整的文档索引和学习路径

- [系统设计文档.md](系统设计文档.md) - 详细的技术设计说明
- [参数整定指南.md](参数整定指南.md) - PID参数整定方法
- [测试验证文档.md](测试验证文档.md) - 测试用例和验证标准
- [用户手册.md](用户手册.md) - 详细使用说明
- [项目实施报告.md](项目实施报告.md) - 项目完成情况总结

## 技术支持

更多信息请参考：
- MathWorks官方文档：Inverted Pendulum Example
- Simulink S-Function开发指南
- PID Tuner使用手册

## 版权信息

Copyright 1990-2023 The MathWorks, Inc.
